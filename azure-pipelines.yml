---
trigger:
  - main
resources:
  - repo: self
variables:
  tag: $(Build.BuildId)
stages:
  - stage: Build
    displayName: Build image
    jobs:
      - job: Build
        displayName: Build
        pool:
          vmImage: ubuntu-latest
        steps:
          - task: AzureFunctionApp@2
    inputs:
      connectedServiceNameARM: Azure for Students(1)(885566de-33c8-4a90-9a2b-7f2c596083a2)
      appType: functionAppLinux
      appName: f1-onboard
      package: $(System.DefaultWorkingDirectory)/**/*.zip
      runtimeStack: NODE|20
      deploymentMethod: auto
